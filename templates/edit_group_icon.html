{% extends "base.html" %}

{% block title %}Edit Group Icon{% endblock %}

{% block content %}
<div class="form-container-glassy">
    <div class="form-header">
        <h2 class="form-title">Change Group Icon</h2>
    </div>
    <form action="{{ url_for('main.edit_group_icon', room_id=room.id) }}" method="POST" enctype="multipart/form-data">
        <div class="preview-container">
            <img id="image-preview" src="{{ url_for('static', filename=room.cover_image or 'images/course_placeholder.jpg') }}" alt="Group Icon Preview">
        </div>
        <div class="form-group" style="text-align: center;">
            <label for="group_icon">Select new icon</label>
            <input type="file" id="group_icon" name="group_icon" accept="image/*" required onchange="previewImage(event)" class="input-glassy">
        </div>
        <div class="form-actions">
            <button type="submit" class="btn-primary-glass">Save Changes</button>
        </div>
    </form>
</div>

<style>
.preview-container {
    width: 200px;
    height: 200px;
    border-radius: 50%;
    border: 3px solid rgba(255, 255, 255, 0.5);
    margin: 1rem auto;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255,255,255,0.1);
}
.preview-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
</style>
{% endblock %}

{% block scripts %}
<script>
    function previewImage(event) {
        var reader = new FileReader();
        reader.onload = function(){
            var output = document.getElementById('image-preview');
            output.src = reader.result;
        };
        reader.readAsDataURL(event.target.files[0]);
    }
</script>
{% endblock %}
