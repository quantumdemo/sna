{% extends "base.html" %}

{% block title %}Exam Dashboard{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h1>Exam Dashboard</h1>
        <a href="{{ url_for('instructor.create_exam_step_1') }}" class="btn-primary-glass">Create New Exam</a>
    </div>

    <div class="table-container-glassy">
        <table class="glassy-table">
            <thead>
                <tr>
                    <th>Exam Title</th>
                    <th>Course</th>
                    <th>Status</th>
                    <th>Submissions</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for exam in exams %}
                <tr>
                    <td>{{ exam.title }}</td>
                    <td>{{ exam.course.title }}</td>
                    <td>
                        {% if exam.is_published %}
                            <span class="chip-glassy chip-positive">Published</span>
                        {% else %}
                            <span class="chip-glassy chip-neutral">Draft</span>
                        {% endif %}
                    </td>
                    <td>{{ exam.submissions.count() }}</td>
                    <td class="actions-cell">
                        <a href="{{ url_for('instructor.manage_exam', exam_id=exam.id) }}" class="btn-action btn-action-neutral">Manage</a>
                        <a href="{{ url_for('instructor.review_exam_submissions', exam_id=exam.id) }}" class="btn-action btn-action-positive">Submissions</a>
                        <form action="#" method="post" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this exam?');">
                            <button type="submit" class="btn-action btn-action-negative">Delete</button>
                        </form>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="5" style="text-align:center;">No exams created yet.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
