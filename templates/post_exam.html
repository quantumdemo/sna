{% extends "base.html" %}

{% block title %}Exam Submitted{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="form-container-glassy" style="max-width: 800px; margin: 2rem auto; text-align: center;">
        <div class="form-header">
            <h1 class="form-title">Exam Submitted Successfully</h1>
        </div>

        <p>Your submission for the exam "<strong>{{ submission.final_exam.title }}</strong>" has been recorded.</p>

        {% if submission.final_exam.release_scores_immediately %}
            <hr style="margin: 2rem 0;">
            <div class="exam-results">
                <h3 class="form-title">Your Score</h3>
                <p class="score-display {{ 'passed' if submission.score >= submission.final_exam.pass_mark else 'failed' }}">
                    {{ "%.2f"|format(submission.score) }}%
                </p>
                {% if submission.score >= submission.final_exam.pass_mark %}
                    <p class="text-positive">Congratulations, you have passed the exam!</p>
                {% else %}
                    <p class="text-negative">Unfortunately, you did not pass the exam.</p>
                    {% if submission.final_exam.retake_allowed and submission.attempt_number < submission.final_exam.allowed_attempts %}
                        <p>You have {{ submission.final_exam.allowed_attempts - submission.attempt_number }} attempt(s) remaining.</p>
                        <a href="{{ url_for('main.pre_exam', exam_id=submission.final_exam.id) }}" class="btn-primary-glass">Retake Exam</a>
                    {% endif %}
                {% endif %}
            </div>
        {% else %}
            <p>Your results will be released by the instructor after review.</p>
        {% endif %}

        <div class="form-actions" style="margin-top: 2rem;">
            <a href="{{ url_for('main.course_detail', course_id=submission.final_exam.course.id) }}" class="btn-secondary-glass">Back to Course</a>
        </div>
    </div>
</div>
<style>
.score-display {
    font-size: 3rem;
    font-weight: bold;
    margin: 1rem 0;
}
.score-display.passed {
    color: #22c55e; /* green-500 */
}
.score-display.failed {
    color: #ef4444; /* red-500 */
}
</style>
{% endblock %}
